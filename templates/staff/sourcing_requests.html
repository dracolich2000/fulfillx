{% extends 'layouts/staff-base.html' %}

{% block title %} Sourcing Requests {% endblock %}


{% block stylesheet %}
<link rel="stylesheet" href="/static/css/staff/styles.css">
{% endblock %}

{% block content %}
<div class="container" hidden>
    <div class="tabs">
        <div class="tab" data-tab="new">New</div>
        <div class="tab" data-tab="responded">Responded</div>
        <div class="tab" data-tab="all">All</div>
    </div>

    <div class="tab-content active" id="new">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Product Details</th>
                    <th>Product URL</th>
                    <th>Description</th>
                    <th>Added By</th>
                    <th>created at</th>
                    <th>Status</th>
                    <th>Review</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for req in new_requests %}
                <tr>
                    <td>{{req.id}}</td>
                    <td>
                        <div class="product-details">
                            {% with req.image as img %}
                                {% if img %}
                                    <img class='product-img' src="{{ img.url }}" alt="{{ req.name }}">
                                {% else %}
                                    No Image
                                {% endif %}
                            {% endwith %}
                            <span>{{ req.name }}</span>
                        </div>
                    </td>
                    <td><a href="{{ req.link }}" target="_blank">View Product</a></td>
                    <td>{{req.description}}</td>
                    <td>{{req.added_by}}</td>
                    <td>{{req.created_at}}</td>
                    <td>{{ req.status }}</td>
                    <td>{{ req.review }}</td>
                    <td>
                        <div class="actions">
                            <button class="view">View</button>
                            <button class="delete">Delete</button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="tab-content" id="responded">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Product Details</th>
                    <th>Product URL</th>
                    <th>Description</th>
                    <th>Added By</th>
                    <th>created at</th>
                    <th>Status</th>
                    <th>Review</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for req in responded_requests %}
                <tr>
                    <td>{{req.id}}</td>
                    <td>
                        <div class="product-details">
                            {% with req.image as img %}
                                {% if img %}
                                    <img class='product-img' src="{{ img.url }}" alt="{{ req.name }}">
                                {% else %}
                                    No Image
                                {% endif %}
                            {% endwith %}
                            <span>{{ req.name }}</span>
                        </div>
                    </td>
                    <td><a href="{{ req.link }}" target="_blank">View Product</a></td>
                    <td>{{req.description}}</td>
                    <td>{{req.added_by}}</td>
                    <td>{{req.created_at}}</td>
                    <td>{{ req.status }}</td>
                    <td>{{ req.review }}</td>
                    <td>
                        <div class="actions">
                            <button class="view">View</button>
                            <button class="delete">Delete</button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="tab-content" id="all">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Product Details</th>
                    <th>Product URL</th>
                    <th>Description</th>
                    <th>Added By</th>
                    <th>created at</th>
                    <th>Status</th>
                    <th>Review</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for req in all_requests %}
                <tr>
                    <td>{{req.id}}</td>
                    <td>
                        <div class="product-details">
                            {% with req.image as img %}
                                {% if img %}
                                    <img class='product-img' src="{{ img.url }}" alt="{{ req.name }}">
                                {% else %}
                                    No Image
                                {% endif %}
                            {% endwith %}
                            <span>{{ req.name }}</span>
                        </div>
                    </td>
                    <td><a href="{{ req.link }}" target="_blank">View Product</a></td>
                    <td>{{req.description}}</td>
                    <td>{{req.added_by}}</td>
                    <td>{{req.created_at}}</td>
                    <td>{{ req.status }}</td>
                    <td>{{ req.review }}</td>
                    <td>
                        <div class="actions">
                            <button class="view">View</button>
                            <button class="delete">Delete</button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}


{% block js %}
<script src="/static/js/staff/script.js"></script>
{% endblock %}
